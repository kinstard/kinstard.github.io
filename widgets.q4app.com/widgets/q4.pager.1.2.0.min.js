/*
Widget:   q4.pager
Version:  1.2.0
Compiled: 2017-10-20
*/
!function(a){a.widget("q4.pager",{options:{content:null,count:0,perPage:1,pages:[],startPage:1,showFirstLast:!0,showPrevNext:!0,showPages:!0,trigger:"> *",template:"<span>{{page}}</span>",append:!0,labels:{first:"«",prev:"<",next:">",last:"»"},pageMessageContainer:null,pageMessageTemplate:"",beforeChange:function(a,b){},afterChange:function(a,b){}},$items:null,pages:[],currentPage:null,changePage:function(a,b){var c=(this.options,{page:a,prevPage:this.currentPage});this._trigger("beforeChange",b,c),this._setPage(a),this._trigger("afterChange",b,c)},_create:function(){this._bindEvents()},_init:function(){this._drawPager()},_bindEvents:function(){var b={};b["click "+this.options.trigger]=function(b){a(b.target).hasClass("pager-disabled")||a(b.target).hasClass("pager-active")||this.changePage(a(b.target).data("page"),b)},this._on(b)},_drawPager:function(){var b,c=this.options,d=this.element,e=null;if("string"==typeof c.content?this.$items=a(c.content):c.content instanceof jQuery&&(this.$items=c.content),this.pages=[],a.isArray(c.pages)&&c.pages.length)this.pages=c.pages,b=this.pages.length,c.startPage&&a.inArray(c.startPage,this.pages)>-1&&(e=c.startPage);else if(this.$items||c.count){b=Math.ceil((this.$items?this.$items.length:c.count)/(c.perPage||1));for(var f=1;f<=b;f++)this.pages.push(f);c.startPage&&(e=Math.max(1,Math.min(b+1,c.startPage)))}c.append||d.empty(),c.showFirstLast&&a(Mustache.render(c.template,{page:c.labels.first})).addClass("pager-first").data("page",1).appendTo(d),c.showPrevNext&&a(Mustache.render(c.template,{page:c.labels.prev})).addClass("pager-prev pager-disabled").appendTo(d),c.showPages&&a.each(this.pages,function(b,e){a(Mustache.render(c.template,{page:e})).addClass("pager-page").data("page",e).appendTo(d)}),c.showPrevNext&&a(Mustache.render(c.template,{page:c.labels.next})).addClass("pager-next pager-disabled").appendTo(d),c.showFirstLast&&a(Mustache.render(c.template,{page:c.labels.last})).addClass("pager-last").data("page",b).appendTo(d),1==b&&a(".pager-page",d).addClass("pager-disabled"),null!==e&&this.changePage(e)},_setPage:function(b){var c=this.element,d=this.options,e=a.inArray(b,this.pages),f=this.pages.length-1;if(-1!=e){if(a(".pager-first, .pager-prev",c).toggleClass("pager-disabled",0==e),a(".pager-last, .pager-next",c).toggleClass("pager-disabled",e==f),a(".pager-prev",c).data("page",e>0?this.pages[e-1]:""),a(".pager-next",c).data("page",e<f?this.pages[e+1]:""),a(".pager-page",c).removeClass("pager-active").filter(function(){return a(this).data("page")==b}).addClass("pager-active"),this.$items){var g=e*d.perPage;this.$items.hide().slice(g,g+d.perPage).show()}if(d.pageMessageContainer&&d.pageMessageTemplate){var h=this.$items?this.$items.length:d.count;a(d.pageMessageContainer).html(Mustache.render(d.pageMessageTemplate,{page:b,pageCount:this.pages.length,firstItem:e*d.perPage+1,lastItem:Math.min(h,(e+1)*d.perPage),itemCount:h}))}this.currentPage=b}}})}(jQuery);